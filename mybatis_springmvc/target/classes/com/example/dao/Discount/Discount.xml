<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.dao.Discount.DiscountDao">
    <insert id="insertDis" parameterType="Discount" useGeneratedKeys="true" keyProperty="discount_ID">
          INSERT INTO  discount (discount_total,discount_gift)
          VALUES (#{discount_total},#{discount_gift})
    </insert>

    <insert id="insertVipDis" parameterType="VIP_Discount">
        INSERT INTO vip_discount (vip_Level,level_Description,discount_ID)
        VALUES (#{vip_Level},#{level_Description},#{discount_ID})
    </insert>

    <select id="selectBytotal" resultType="Discount">
        select *
        from discount
        <where>
            <if test="discount_total!=0">
                discount_total=#{discount_total}
            </if>
        </where>
    </select>

    <select id="selectBysome" resultType="VDiscount">
        SELECT d.discount_ID,discount_total,discount_gift,vip_Level
        FROM discount d,vip_discount v
        <where>
            d.discount_ID=v.discount_ID

            <if test="vip_Level!=null">
            AND    vip_Level=#{vip_Level}
            </if>


            <if test="discount_ID!=null">
            AND    d.discount_ID=#{discount_ID}
            </if>

        </where>
    </select>

    <update id="updateDis">
        UPDATE discount
        <set>
            <if test="discount_total!=null and discount_total!=''">
                discount_total=#{discount_total},
            </if>
            <if test="discount_gift!=null and discount_gift!=''">
                discount_gift=#{discount_gift}
            </if>
        </set>
        WHERE discount_ID=#{discount_ID}
    </update>
</mapper>